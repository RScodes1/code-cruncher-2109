<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/7bb2910194.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="main.css">
    <title>iMind - Sign Up</title>
</head>
<style>
    .top_signup {
        font-family: 'Arial', sans-serif;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-top: 120px;
    }
</style>

<body style="background-image: url('brain.png');
background-repeat: no-repeat;
background-size: 50%;
background-position: left;
background-color: yellow;">
    <header>
        <div class="logo">
            <img src="logo.png" alt="logo">
        </div>
        <nav class="navbar">
            <ul>
                <li>
                    <a href="../code-cruncher-2109/index.html">Home</a>
                </li>
                <li>
                    <a href="../code-cruncher-2109/about.html">About</a>
                </li>
                <li>
                    <a href="#blog">Blog</a>
                </li>
                <li>
                    <a href="#resources">Resources</a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="../code-cruncher-2109/emergency_phNo.html">Emergency
                                Numbers</a></li>
                        <li><a class="dropdown-item" href="../code-cruncher-2109/mhc.html">Mental Health Explained</a>
                        </li>
                        <li><a class="dropdown-item" href="../code-cruncher-2109/prescriptions.html">Prescriptions</a>
                        </li>
                        <li><a class="dropdown-item" href="../code-cruncher-2109/moodJournal.html">Mood Journal</a></li>
                        <li><a class="dropdown-item" href="#">Relaxation music</a></li>
                        <li><a class="dropdown-item" href="#">Moby Music</a></li>
                        <li><a class="dropdown-item" href="#">Nature Sounds with video</a></li>
                        <li><a class="dropdown-item" href="#">Adult coloring</a></li>
                        <li><a class="dropdown-item" href="#">Guided Imagery</a></li>
                        <li><a class="dropdown-item" href="#">Daily Affirmations</a></li>
                        <li><a class="dropdown-item" href="#">Guided Mediatoin</a></li>
                        <li><a class="dropdown-item" href="#">Audio Stories</a></li>
                    </ul>
                </li>
                <li>
                    <a href="../code-cruncher-2109/faq.html">FAQ</a>
                </li>
                <li>
                    <a href="../code-cruncher-2109/contact.html">Contact</a>
                </li>
                <li>
                    <a href="../code-cruncher-2109/privacy.html">Privacy</a>
                </li>
                <li>
                    <a href="../code-cruncher-2109/login.html">Login</a>
                </li>
                <li>
                    <a href="../code-cruncher-2109/signup.html">Sign Up</a>
                </li>
            </ul>
        </nav>
    </header>

    <div class="top_signup">
        <h2 class="signup_text">Sign Up</h2>
        <div class="signup-container">
            <form class="signup-form">
                <div class="form-group">
                    <label for="FirstName"></label>
                    <input type="text" id="FirstName" name="firstName" placeholder="Enter your first name" required>
                </div>
                <div class="form-group">
                    <label for="LastName"></label>
                    <input type="text" id="LastName" name="lastName" placeholder="Enter your last name" required>
                </div>
                <div class="form-group">
                    <label for="Email"></label>
                    <input type="email" id="Email" name="email" placeholder="Email" required>
                </div>
                <div class="form-group">
                    <label for="Password"></label>
                    <input type="password" id="Password" name="password" placeholder="Password" required>
                </div>
                <div class="form-group">
                    <label for="RetypePassword"></label>
                    <input type="password" id="RetypePassword" name="retypePassword" placeholder="Retype password"
                        required>
                </div>
                <button class="Button" id="sgnup_btn" type="submit">Sign Up</button>
                <!-- <button class="Button" type="submit">Login</button> -->
            </form>
        </div>
    </div><br><br><br>
    <footer>
        <div class="footer-content">
            <div class="inconsdiv">
                <i class="fa-brands fa-facebook"></i>
                <i class="fa-brands fa-instagram"></i>
                <i class="fa-brands fa-twitter"></i>
                <i class="fa-solid fa-cloud" style="color: #ffffff; margin-right: 10px"></i>
                <i class="fa-brands fa-linkedin"></i>
                <i class="fa-brands fa-spotify"></i>
                <span>Subscribe</span>
            </div>
            <p>Go To Your Happy Place</p>
            <div class="copyright">&copy; 2022 iMind. All rights reserved</div>
            <div></div>
        </div>
    </footer>

    <script>

        // let FirstName = document.getElementById("FirstName");
        // let LastName = document.getElementById("LastName");
        // let Email = document.getElementById("Email");
        // let Password = document.getElementById("Password");
        // let RetypePassword = document.getElementById("RetypePassword");

        // let sgnup_btn = document.getElementById("sgnup_btn");

        // async function addSignup() {
        //     try {
        //         let signup = {
        //             FirstName: FirstName.value,
        //             LastName: LastName.value,
        //             Email: Email.value,
        //             Password: Password.value,
        //             RetypePassword: RetypePassword.value,
        //         };
        //         console.log(signup);

        //         let userDataArrayJSON = localStorage.getItem('userDataArray');
        //         let userDataArray = [];

        //         if (userDataArrayJSON) {

        //             userDataArray = JSON.parse(userDataArrayJSON);
        //             console.log('Existing user data array:', userDataArray);
        //         } 
        //         else {
        //             console.log('No existing user data array found.');
        //         }

        //         const username = prompt('Enter your username:');
        //         const password = prompt('Enter your password:');

        //         const existingUser = userDataArray.find(user => user.username === username);

        //         if (existingUser) {

        //             console.log('User is already registered. Performing login:', existingUser);
        //         } else {

        //             const newUser = { username, password };

        //             userDataArray.push(newUser);


        //             localStorage.setItem('userDataArray', JSON.stringify(userDataArray));

        //             console.log('User signed up and logged in:', newUser);
        //         }
        //     }
        //     catch (err) {
        //         console.log(err);
        //     }
        // }

        // sgnup_btn.addEventListener("click", () => {
        //     if (FirstName.value && LastName.value && Email.value && Password.value && RetypePassword.value) {
        //         if (Password.value === RetypePassword.value) {
        //             addSignup();
        //             alert('Your account has been created successfully');

        //         }
        //         else {
        //             alert('Passwords do not match');
        //         }
        //     }
        //     else {
        //         alert('Please fill all the fields');

        //     }
        // })

        let FirstName = document.getElementById("FirstName");
        let LastName = document.getElementById("LastName");
        let Email = document.getElementById("Email");
        let Password = document.getElementById("Password");
        let RetypePassword = document.getElementById("RetypePassword");

        let sgnup_btn = document.getElementById("sgnup_btn");

        async function addSignup() {
            try {
                let signup = {
                    FirstName: FirstName.value,
                    LastName: LastName.value,
                    Email: Email.value,
                    Password: Password.value,
                    RetypePassword: RetypePassword.value,
                };
                console.log(signup);

                let userDataArrayJSON = localStorage.getItem('userDataArray');
                let userDataArray = [];

                if (userDataArrayJSON) {
                    userDataArray = JSON.parse(userDataArrayJSON);
                    console.log('Existing user data array:', userDataArray);
                } else {
                    console.log('No existing user data array found.');
                }

                const existingUser = userDataArray.find(user => user.Email === Email.value);

                if (existingUser) {
                    alert('User is already registered. Please login.');

                    console.log('User is already registered. Performing login:', existingUser);
                    // Adjust the path based on your folder structure
                    setTimeout(() => {
                        window.location.href = 'login.html';
                    },3000);
                    
                } else {
                    const newUser = { Email: Email.value, Password: Password.value };

                    userDataArray.push(newUser);

                    localStorage.setItem('userDataArray', JSON.stringify(userDataArray));

                    alert('Your account has been created successfully');

                    console.log('User signed up and logged in:', newUser);
                }
            } catch (err) {
                console.log(err);
            }
        }

        sgnup_btn.addEventListener("click", (e) => {
            if (FirstName.value && LastName.value && Email.value && Password.value && RetypePassword.value) {
                if (Password.value === RetypePassword.value) {
                    e.preventDefault();
                    addSignup();

                } else {
                    alert('Passwords do not match');
                }
            } else {
                alert('Please fill all the fields');
            }
        });

    </script>
</body>

</html>